<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../uvalib-libraries/uvalib-libraries.html">
<link rel="import" href="../google-calendar-events/google-calendar-events.html">

<!--
Element providing the hours of operation for the Library.

##### Example

    <uvalib-hours></uvalib-hours>

@element uvalib-hours
@blurb Element providing the hours of operation for the Library.
@status alpha
@homepage http://uvalib-components.github.io/uvalib-hours
-->
<polymer-element name="uvalib-hours" extends="uvalib-libraries" attributes="listing library startDateTime endDateTime">

  <template>
    <template repeat="{{lib in listing}}">
      <template if="{{lib.hoursCalendar}}">
        <google-calendar-events
                  id="{{lib.id}}"
                  maxResults="2500"
                  calendarId="{{lib.hoursCalendar}}"
                  singleEvents year
                  on-calendar-response="{{bindResults}}">
        </google-calendar-events>
      </template>
    </template>
  </template>
  <script>

    Polymer('uvalib-hours', {

      bindResults: function(e, cal){
        var libid = e.target.id;
        for (var i=0; i<this.listing.length; i++) {
          if (this.listing[i].id == libid) {
            this.listing[i].cal = cal;
            break;
          }
        }
      }

    });

  </script>

</polymer-element>
